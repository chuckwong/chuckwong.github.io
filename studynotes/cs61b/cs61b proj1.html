<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>CS 61B | Project 1 | Data Structures (Deque API) | Forkercat | BLOG</title><meta name="author" content="Junhao Wang"><meta name="copyright" content="Junhao Wang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Project 1A - Deque (Linked List &amp; Array)Code: linkGuide: linkTips (not too much!): link  Take things a little at a time. Writing tons of code all at once is going to lead to misery and only mise">
<meta property="og:type" content="website">
<meta property="og:title" content="CS 61B | Project 1 | Data Structures (Deque API)">
<meta property="og:url" content="http://www.junhaow.com/studynotes/cs61b/cs61b%20proj1.html">
<meta property="og:site_name" content="Forkercat | BLOG">
<meta property="og:description" content="Project 1A - Deque (Linked List &amp; Array)Code: linkGuide: linkTips (not too much!): link  Take things a little at a time. Writing tons of code all at once is going to lead to misery and only mise">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://www.junhaow.com/resources/NoCover.jpg">
<meta property="article:published_time" content="2020-04-17T20:45:12.604Z">
<meta property="article:modified_time" content="2019-05-17T18:53:32.000Z">
<meta property="article:author" content="Junhao Wang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.junhaow.com/resources/NoCover.jpg"><link rel="shortcut icon" href="/resources/favicon/favicon.ico"><link rel="canonical" href="http://www.junhaow.com/studynotes/cs61b/cs61b%20proj1"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-146643833-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-146643833-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '05/17/2019 11:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/resources/avatar/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">50</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">114</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/studynotes/"><i class="fa-fw fas fa-pencil-alt"></i><span> Study Notes</span></a></div><div class="menus_item"><a class="site-page" href="/lc/"><i class="fa-fw fas fa-list"></i><span> LeetCode Book</span></a></div><div class="menus_item"><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games I've Played</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-link"></i><span> Links</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://zhenf.dev"><i class="fa-fw fas fa-user"></i><span> Zhenf.dev</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.jianshu.com/u/41865efdad5d"><i class="fa-fw fas fa-user"></i><span> Xiaofu</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.davex.pw"><i class="fa-fw fas fa-user"></i><span> DaveX</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-grin-squint"></i><span> About Me</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('/resources/banner/banner_1.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Forkercat | BLOG</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/studynotes/"><i class="fa-fw fas fa-pencil-alt"></i><span> Study Notes</span></a></div><div class="menus_item"><a class="site-page" href="/lc/"><i class="fa-fw fas fa-list"></i><span> LeetCode Book</span></a></div><div class="menus_item"><a class="site-page" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> Games I've Played</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-link"></i><span> Links</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://zhenf.dev"><i class="fa-fw fas fa-user"></i><span> Zhenf.dev</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.jianshu.com/u/41865efdad5d"><i class="fa-fw fas fa-user"></i><span> Xiaofu</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.davex.pw"><i class="fa-fw fas fa-user"></i><span> DaveX</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-grin-squint"></i><span> About Me</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">CS 61B | Project 1 | Data Structures (Deque API)</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><br>

<h2 id="Project-1A-Deque-Linked-List-amp-Array"><a href="#Project-1A-Deque-Linked-List-amp-Array" class="headerlink" title="Project 1A - Deque (Linked List &amp; Array)"></a>Project 1A - Deque (Linked List &amp; Array)</h2><p>Code: <a target="_blank" rel="noopener" href="https://github.com/junhaowww/cs61b-sp18/tree/master/proj1a">link</a><br>Guide: <a target="_blank" rel="noopener" href="https://sp18.datastructur.es/materials/proj/proj1a/proj1a">link</a><br>Tips (not too much!): <a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1XBJOht0xWz1tEvLuvOL4lOIaY0NSfArXAvqgkrx0zpc/edit#">link</a></p>
<blockquote>
<p>Take things a little at a time. Writing tons of code all at once is going to lead to misery and only misery. If you wrote too much stuff and feel overwhelmed, comment out whatever is unnecessary.</p>
</blockquote>
<blockquote>
<p>Work out what your data structures will look like on paper before you try implementing them in code! If you can find a willing friend, have them give commands, while you attempt to draw everything out. Try to come up with operations that might reveal problems with your implementation.</p>
</blockquote>
<blockquote>
<p>Sentinel nodes make life much easier, once you understand them.</p>
</blockquote>
<blockquote>
<p>Circular data structures make life easier for both implementations (but especially the ArrayDeque, e.g., MOD operation).</p>
</blockquote>
<h3 id="The-Deque-API"><a href="#The-Deque-API" class="headerlink" title="The Deque API"></a>The Deque API</h3><p>The double ended queue is very similar to the <code>SLList</code> and <code>AList</code> classes that we’ve discussed in class.</p>
<p><code>Deque</code> (usually pronounced like “deck”) is an irregular acronym of double-ended queue. <code>Double-ended queues</code> are sequence containers with <code>dynamic sizes</code> that can be <code>expanded or contracted on both ends</code> (either its front or its back).</p>
<p>Generally implemented as a dynamic array, it allows direct access to any element in the sequence and provides relatively fast addition/removal of elements at the beginning or the end of the sequence.</p>
<ul>
<li>addFirst(T x)</li>
<li>addLast(T x)</li>
<li>isEmpty()</li>
<li>size()</li>
<li>printDeque()</li>
<li>T removeFirst()</li>
<li>T removeLast(T)</li>
<li>T get(int index)</li>
</ul>
<h3 id="LinkedListDeque"><a href="#LinkedListDeque" class="headerlink" title="LinkedListDeque"></a>LinkedListDeque</h3><p>Code (see above link)</p>
<p>Compared to array deque, this one is not difficult. Just pay attention to special cases and the way to loop.</p>
<p><strong>Note:</strong> there is a circular sentinel.</p>
<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><ul>
<li><p>get (iterative version)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 0 1 2 3 4 5</span></span><br><span class="line"><span class="comment">// 3 5 9 5 3 8</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// if (isEmpty()) &#123; return null; &#125;</span></span><br><span class="line">  <span class="comment">/* could be removed, since we set sentinel.item == null */</span></span><br><span class="line">  Node p = sentinel.next; <span class="comment">/* the 1st real node */</span></span><br><span class="line">  <span class="keyword">while</span> (index &gt; <span class="number">0</span> &amp;&amp; p != sentinel) &#123; <span class="comment">/* p != sentinel stops outofbound cases */</span></span><br><span class="line">    p = p.next;</span><br><span class="line">    index--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> p.item; <span class="comment">/* when index is out of bound, returns null (sentinel) */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>get (recursive version)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** getRecursive - LinkedListDeque class */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">getRecursive</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/** sentinel.next won&#x27;t be null */</span></span><br><span class="line">  Node firstNode = sentinel.next;</span><br><span class="line">  <span class="keyword">return</span> firstNode.get(index); <span class="comment">/* Node.get */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Helper Method (Recursive) - Node class */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (index &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span> == sentinel) &#123; <span class="comment">/* what if index is very large */</span></span><br><span class="line">    <span class="comment">/** Returns null if index is out of bound */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> next.get(index - <span class="number">1</span>);   <span class="comment">/* better */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="addFirst"><a href="#addFirst" class="headerlink" title="addFirst"></a>addFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">  Node newNode = <span class="keyword">new</span> Node(item, sentinel, sentinel.next);</span><br><span class="line">  sentinel.next = newNode;</span><br><span class="line">  newNode.next.prev = newNode;</span><br><span class="line">  size += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="addLast"><a href="#addLast" class="headerlink" title="addLast"></a>addLast</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">  Node newNode = <span class="keyword">new</span> Node(item, sentinel.prev, sentinel);</span><br><span class="line">  sentinel.prev = newNode;</span><br><span class="line">  newNode.prev.next = newNode;</span><br><span class="line">  size += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="removeFirst"><a href="#removeFirst" class="headerlink" title="removeFirst"></a>removeFirst</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isEmpty()) &#123; <span class="comment">/* because of circular sentinel, removedNode won&#x27;t be null */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">/* just in case size -= 1, return is okay since sentinel.item is null */</span></span><br><span class="line">  &#125;</span><br><span class="line">  Node removedNode = sentinel.next; <span class="comment">/* even without if, these two lines won&#x27;t crash */</span></span><br><span class="line">  sentinel.next = removedNode.next;</span><br><span class="line">  removedNode.next.prev = sentinel; <span class="comment">/* ok for all size &gt;= 1 */</span></span><br><span class="line">  size -= <span class="number">1</span>; <span class="comment">/** But &quot;if&quot; decides if this line should be run */</span></span><br><span class="line">  <span class="keyword">return</span> removedNode.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="removeLast"><a href="#removeLast" class="headerlink" title="removeLast"></a>removeLast</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** Usually, when using a circular sentinel and the list is empty, both sides of the equation are pointing at the sentinel! Just do useless work */</span></span><br><span class="line">  Node removedNode = sentinel.prev; <span class="comment">/** Use some local variables */</span></span><br><span class="line">  removedNode.prev.next = sentinel;</span><br><span class="line">  sentinel.prev = removedNode.prev;</span><br><span class="line">  size -= <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> removedNode.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="Array-Deque"><a href="#Array-Deque" class="headerlink" title="Array Deque"></a>Array Deque</h3><h4 id="Constructor-How-where-to-start"><a href="#Constructor-How-where-to-start" class="headerlink" title="Constructor (How/where to start?)"></a>Constructor (How/where to start?)</h4><p>One requirement of the project is that the <code>initSize</code> of the array should be 8. We can initially make it 4. Make things easier! Later, we have to deal with many boundary cases and design a way to resize the array.</p>
<p>What fields do we need?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">publci <span class="class"><span class="keyword">class</span> <span class="title">ArrayDeque</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> nextFirst;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> nextLast;</span><br><span class="line">  <span class="keyword">private</span> T[] items;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> initSize = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>First, where do we start? Well, I can pick a position, what about the middle position <code>mid = length / 2</code>.</p>
<p>[ ][ ][ ][ ]</p>
<p><code>nextFirst</code> and <code>nextLast</code> point to the same box or two boxes?</p>
<p>If they point to the same box, for <code>addFirst</code> and <code>addLast</code>, we have to deal with special cases.</p>
<p>What if <code>nextFirst</code> points to the leftmost element (i.e. <code>nextFirst - 1</code> is the position we about to put a new element in), while <code>nextLast</code> points to the position we about to put a new element in? Think about it.</p>
<p>Finally, I decide to make them point to the future spots because it makes code cleaner without special <code>if</code>. It’s more intuitive too.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayDeque</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  items = (T[]) <span class="keyword">new</span> Object[initSize];</span><br><span class="line">  <span class="keyword">int</span> mid = items.length / <span class="number">2</span>;</span><br><span class="line">  nextFirst = mid - <span class="number">1</span>;</span><br><span class="line">  nextLast = mid;</span><br><span class="line">  size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Hit-the-Boundary"><a href="#Hit-the-Boundary" class="headerlink" title="Hit the Boundary"></a>Hit the Boundary</h4><p>When there is no enough space in one side, I’ll put elements into the other side. The guide suggests we using the circular approach. There are few things we need to think over while designing the algorithm.</p>
<ul>
<li><p>When to resize?</p>
<p><code>F</code> stands for <code>nextFirst</code>; <code>L</code> stands for <code>nextLast</code>.</p>
<p>Init state: [ ][ ][ ][ ]</p>
<p><code>F</code> points to the 2nd box. <code>L</code> points to the 3rd box.</p>
<p>Consider 3 cases here:</p>
<ul>
<li><p>Invoke <code>addFirst</code> only:</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number"> 0 </span><span class="number"> 1 </span><span class="number"> 2 </span> 3</span><br><span class="line">[x][x][ ][x]</span><br><span class="line">-------F---- F starts from<span class="number"> 1 </span>to<span class="number"> 2 </span>(move<span class="number"> 3 </span>times)</span><br><span class="line">-------L---- L doesn&#x27;t change</span><br></pre></td></tr></table></figure></li>
<li><p>Invoke <code>addLast</code> only:</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number"> 0 </span><span class="number"> 1 </span><span class="number"> 2 </span> 3</span><br><span class="line">[x][ ][x][x]</span><br><span class="line">----F------- F doesn&#x27;t change</span><br><span class="line">----L------- L starts from<span class="number"> 2 </span>to<span class="number"> 1 </span>(move<span class="number"> 3 </span>times)</span><br></pre></td></tr></table></figure></li>
<li><p>Move <code>F</code> 1 time &amp; Move <code>L</code> 2 times:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span></span><br><span class="line"><span class="selector-attr">[ ]</span><span class="selector-attr">[x]</span><span class="selector-attr">[x]</span><span class="selector-attr">[x]</span></span><br><span class="line">-F---------- F starts <span class="selector-tag">from</span> <span class="number">1</span> <span class="selector-tag">to</span> <span class="number">0</span></span><br><span class="line">-L---------- L starts <span class="selector-tag">from</span> <span class="number">2</span> <span class="selector-tag">to</span> <span class="number">0</span></span><br></pre></td></tr></table></figure></li>
<li><p>Move <code>F</code> </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span></span><br><span class="line"><span class="selector-attr">[x]</span><span class="selector-attr">[x]</span><span class="selector-attr">[x]</span><span class="selector-attr">[x]</span><span class="selector-attr">[ ]</span><span class="selector-attr">[x]</span></span><br><span class="line">-------------F---- F starts <span class="selector-tag">from</span> <span class="number">2</span> <span class="selector-tag">to</span> <span class="number">4</span></span><br><span class="line">-------------L---- L starts <span class="selector-tag">from</span> <span class="number">3</span> <span class="selector-tag">to</span> <span class="number">4</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>My <code>question</code> is do we need to add one more element into the array, in other words, make it fully filled?</p>
<p>You’ll see it is not a good idea. The 1st reason is that once we do that we don’t know how to detect whether the array is full, although we can use <code>size</code>. That <code>L</code> is before <code>F</code> doesn’t ensure that the array is full.</p>
<p>However, the most important reason is that if we keep <code>F</code> always equal or less than <code>L</code> we can make things easier or possible for later implementation of <code>get</code> and <code>resize</code>.</p>
<p>In these functions, we need to know which part of the array belongs to the left or right side.</p>
<p><strong>Note:</strong> You know what. Later, I think it’s okay to fully fill that out. What we need to do in later iteration, the order is either <code>F</code> -&gt; <code>L</code> (not full), <code>F</code> -&gt; <code>END</code> -&gt; <code>START</code> -&gt; <code>L</code>. So the relative order of <code>F</code> and <code>L</code> does not really matters here. <code>F</code> may encounter <code>L</code>, but <code>size</code> could tell that it does not reach the <code>END</code>.</p>
<p>Also, we need <code>resize</code> when the array is full… not at any other time :)</p>
</li>
<li><p>Since we need to implement <code>get(int index)</code> of a constant time later, how can we calculate the real index? (horrible) And how to resize?</p>
</li>
</ul>
<h4 id="My-solution"><a href="#My-solution" class="headerlink" title="My solution"></a>My solution</h4><p>My solution for <code>addFirst</code>, <code>addLast</code>, and <code>resize</code> (all passed the test):</p>
<p>Test: <a target="_blank" rel="noopener" href="https://github.com/junhaowww/cs61b-sp18/blob/master/proj1a/ArrayDequeTest.java">ArrayDequeTest.java</a></p>
<h5 id="resize-amp-resizeDown"><a href="#resize-amp-resizeDown" class="headerlink" title="resize &amp; resizeDown"></a>resize &amp; resizeDown</h5><ul>
<li><p>resize</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  T[] newItems = (T[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">  <span class="comment">//  0  1  2  3  4  5  6  7</span></span><br><span class="line">  <span class="comment">//       [x][x][x][x]       items (copy array)</span></span><br><span class="line">  <span class="comment">// [ ][ ][ ][ ][ ][ ][ ][ ] newItems</span></span><br><span class="line">  <span class="comment">//    [x][x][x]   if initSize is an odd number</span></span><br><span class="line">  <span class="comment">// [ ][ ][ ][ ][ ][ ]</span></span><br><span class="line">  <span class="keyword">int</span> startPos = newItems.length / <span class="number">2</span> - size / <span class="number">2</span>; <span class="comment">/* draw a picture */</span></span><br><span class="line">  <span class="comment">/** Copy */</span></span><br><span class="line">  <span class="comment">/* // stupid way</span></span><br><span class="line"><span class="comment">  int oldIndex = (nextFirst + 1 &gt; size - 1) ? (0) : (nextFirst + 1);</span></span><br><span class="line"><span class="comment">  // if nextF points at the last position, it means we need to start from 0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="keyword">int</span> oldIndex = nextFirst + <span class="number">1</span>; <span class="comment">/* Use MOD operation instead */</span></span><br><span class="line">  <span class="keyword">int</span> newIndex = startPos; <span class="comment">/* newIndex for newItems */</span></span><br><span class="line">  <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (count &lt; size) &#123; <span class="comment">/* yes! the original size! */</span></span><br><span class="line">    newItems[newIndex] = items[oldIndex % items.length]; <span class="comment">/* 3 + 1 = 4, 4 % 4 = 0 */</span></span><br><span class="line">    oldIndex++; newIndex++;</span><br><span class="line">    count++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/** Set new fields */</span></span><br><span class="line">  items = newItems;</span><br><span class="line">  <span class="comment">// size = capacity; bug! we don&#x27;t need to change size!</span></span><br><span class="line">  nextFirst = startPos - <span class="number">1</span>;</span><br><span class="line">  nextLast = newIndex; <span class="comment">/* or nextFirst + size */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>resizeDown</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resizeDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  resize(size * <span class="number">2</span> &lt; initSize ? initSize : size * <span class="number">2</span>); <span class="comment">/* if it is too small, make it 8 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="addFirst-addLast"><a href="#addFirst-addLast" class="headerlink" title="addFirst/addLast"></a>addFirst/addLast</h5><ul>
<li><p>addFirst</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFirst</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (size == items.length) &#123; <span class="comment">/** FULL! */</span></span><br><span class="line">    resize(items.length * <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  items[nextFirst] = item;</span><br><span class="line">  nextFirst = ((nextFirst - <span class="number">1</span>) + items.length) % items.length;</span><br><span class="line">  <span class="comment">/* since in java, -5 % 6 == -5, we need to add items.length */</span></span><br><span class="line">  size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>addLast</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLast</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (size == items.length) &#123;</span><br><span class="line">    resize(items.length * <span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  items[nextLast] = item;</span><br><span class="line">  nextLast = (nextLast + <span class="number">1</span>) % items.length; <span class="comment">/* nextLast += 1 */</span></span><br><span class="line">  size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="removeFirst-removeLast"><a href="#removeFirst-removeLast" class="headerlink" title="removeFirst/removeLast"></a>removeFirst/removeLast</h5><p>Now, let’s finish up with <code>removeFirst</code>, <code>removeLast</code>, and <code>get</code>. Based on the code of <code>addFirst</code> and <code>addLast</code>, it is not difficult. But there are few things to be mentioned.</p>
<ul>
<li>Set the deleted item reference to <code>null</code>. It helps the Garbage Collector to clean the unused objects. If you don’t do it, it still stays there.</li>
<li>Be careful about the boundary. I just copy the code from <code>addFirst</code> and <code>addLast</code>, then write cases to test them out.</li>
<li>Invariants:<ul>
<li><code>nextFirst</code> always points to the previous position of the first element.</li>
<li><code>nextLast</code> always points to the next position of the last element.</li>
</ul>
</li>
</ul>
<ul>
<li><p>removeFirst</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">removeFirst</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Resize down */</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">double</span>) size / items.length &lt; <span class="number">0.25</span> &amp;&amp; items.length &gt; initSize) &#123;</span><br><span class="line">    resizeDown();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextFirst = (nextFirst + <span class="number">1</span>) % items.length;</span><br><span class="line">  T removedItem = items[nextFirst];</span><br><span class="line">  items[nextFirst] = <span class="keyword">null</span>; <span class="comment">/* since it is a reference */</span></span><br><span class="line">  size--;</span><br><span class="line">  <span class="keyword">return</span> removedItem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>removeLast</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">removeLast</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//  0  1  2  3</span></span><br><span class="line">  <span class="comment">// [ ][x][x][x]</span></span><br><span class="line">  <span class="comment">// [ ][ ][ ][ ]</span></span><br><span class="line">  <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Resize down */</span></span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">double</span>) size / items.length &lt; <span class="number">0.25</span> &amp;&amp; items.length &gt; initSize) &#123;</span><br><span class="line">    resizeDown();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  nextLast = ((nextLast - <span class="number">1</span>) + items.length) % items.length;</span><br><span class="line">  T removedItem = items[nextLast];</span><br><span class="line">  items[nextLast] = <span class="keyword">null</span>;</span><br><span class="line">  size--;</span><br><span class="line">  <span class="keyword">return</span> removedItem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="get-1"><a href="#get-1" class="headerlink" title="get"></a>get</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">  <span class="comment">/* Test at the first place. It makes the condition later more succinct */</span></span><br><span class="line">  <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> oldIndex = nextFirst + <span class="number">1</span>; <span class="comment">/* will be MODed */</span></span><br><span class="line">  <span class="keyword">while</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    oldIndex++;</span><br><span class="line">    index--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> items[oldIndex % items.length];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h2 id="Project-1B"><a href="#Project-1B" class="headerlink" title="Project 1B"></a>Project 1B</h2><p>Code: <a target="_blank" rel="noopener" href="https://github.com/junhaowww/cs61b-sp18/tree/master/proj1b">link</a><br>Guide: <a target="_blank" rel="noopener" href="https://sp18.datastructur.es/materials/proj/proj1b/proj1b">link</a></p>
<p>Done~</p>
</div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/resources/avatar/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Junhao Wang</div><div class="author-info__description">Hi, I am a master student at USC studying Computer Science.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">50</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">114</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">10</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/junhaowww"><i class="fab fa-github"></i><span>GitHub (Forkercat)</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://twitter.com/junhaowww" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://www.linkedin.com/in/junhaowww" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://github.com/junhaowww" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.douban.com/people/maodai" target="_blank" title="豆瓣（Book）"><i class="fa fa-book"></i></a><a class="social-icon" href="mailto:junhaowanggg@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Anything/"><span class="card-category-list-name">Anything</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C</span><span class="card-category-list-count">18</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Math/"><span class="card-category-list-name">Math</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Music/"><span class="card-category-list-name">Music</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/OS/"><span class="card-category-list-name">OS</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Python/"><span class="card-category-list-name">Python</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Reading-Notes/"><span class="card-category-list-name">Reading Notes</span><span class="card-category-list-count">5</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/iOS/" style="font-size: 1.45em; color: rgb(161, 195, 15)">iOS</a><a href="/tags/Xcode/" style="font-size: 1.15em; color: rgb(66, 182, 73)">Xcode</a><a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 1.15em; color: rgb(52, 93, 142)">插件</a><a href="/tags/UIScrollView/" style="font-size: 1.15em; color: rgb(162, 115, 62)">UIScrollView</a><a href="/tags/UITableView/" style="font-size: 1.15em; color: rgb(137, 191, 196)">UITableView</a><a href="/tags/AutoLayout/" style="font-size: 1.15em; color: rgb(127, 79, 11)">AutoLayout</a><a href="/tags/%E7%9E%8E%E6%89%AF/" style="font-size: 1.15em; color: rgb(145, 120, 22)">瞎扯</a><a href="/tags/Mac/" style="font-size: 1.3em; color: rgb(51, 86, 60)">Mac</a><a href="/tags/TypeFu/" style="font-size: 1.15em; color: rgb(18, 50, 42)">TypeFu</a><a href="/tags/%E7%BB%83%E6%89%93%E5%AD%97/" style="font-size: 1.15em; color: rgb(12, 173, 89)">练打字</a><a href="/tags/Hexo/" style="font-size: 1.15em; color: rgb(13, 180, 97)">Hexo</a><a href="/tags/%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/" style="font-size: 1.15em; color: rgb(157, 184, 189)">本地图片</a><a href="/tags/Unity/" style="font-size: 1.3em; color: rgb(69, 144, 148)">Unity</a><a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 1.15em; color: rgb(77, 164, 160)">游戏</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.15em; color: rgb(116, 176, 143)">数据结构</a><a href="/tags/LinkedList/" style="font-size: 1.15em; color: rgb(130, 42, 116)">LinkedList</a><a href="/tags/C/" style="font-size: 1.3em; color: rgb(153, 82, 129)">C</a><a href="/tags/%E6%B1%95%E5%A4%A7%E8%AF%BE%E7%A8%8B%E8%A1%A8/" style="font-size: 1.15em; color: rgb(12, 98, 148)">汕大课程表</a><a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 1.15em; color: rgb(152, 111, 198)">音乐</a><a href="/tags/%E7%AE%A1%E4%B9%90%E5%9B%A2/" style="font-size: 1.15em; color: rgb(127, 126, 88)">管乐团</a><a href="/tags/Markdown/" style="font-size: 1.15em; color: rgb(89, 6, 158)">Markdown</a><a href="/tags/Mou/" style="font-size: 1.15em; color: rgb(144, 24, 148)">Mou</a><a href="/tags/%E4%BA%BA%E5%B7%A5%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" style="font-size: 1.15em; color: rgb(59, 172, 189)">人工神经网络</a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.15em; color: rgb(73, 182, 156)">多线程</a><a href="/tags/GCD/" style="font-size: 1.15em; color: rgb(20, 123, 20)">GCD</a><a href="/tags/GRE/" style="font-size: 1.15em; color: rgb(57, 155, 120)">GRE</a><a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 1.15em; color: rgb(59, 87, 132)">英语</a><a href="/tags/%E9%80%BB%E8%BE%91/" style="font-size: 1.15em; color: rgb(65, 83, 140)">逻辑</a><a href="/tags/Argument/" style="font-size: 1.15em; color: rgb(122, 144, 114)">Argument</a><a href="/tags/Logic/" style="font-size: 1.15em; color: rgb(177, 114, 165)">Logic</a><a href="/tags/%E5%BE%AE%E7%A7%AF%E5%88%86/" style="font-size: 1.15em; color: rgb(133, 124, 120)">微积分</a><a href="/tags/Calculus/" style="font-size: 1.15em; color: rgb(102, 37, 140)">Calculus</a><a href="/tags/Python/" style="font-size: 1.15em; color: rgb(81, 159, 113)">Python</a><a href="/tags/%E6%A6%82%E7%8E%87/" style="font-size: 1.15em; color: rgb(40, 62, 72)">概率</a><a href="/tags/Probability/" style="font-size: 1.15em; color: rgb(35, 95, 185)">Probability</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%A4%A7%E5%B0%8F/" style="font-size: 1.15em; color: rgb(145, 160, 73)">数据类型大小</a><a href="/tags/size-t/" style="font-size: 1.15em; color: rgb(136, 136, 51)">size_t</a><a href="/tags/%E8%A1%A5%E7%A0%81/" style="font-size: 1.15em; color: rgb(115, 136, 79)">补码</a><a href="/tags/unsigned/" style="font-size: 1.15em; color: rgb(5, 127, 84)">unsigned</a><a href="/tags/signed/" style="font-size: 1.15em; color: rgb(150, 126, 86)">signed</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">50</div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">82.3k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-04-12T23:04:42.639Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2021 By Junhao Wang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">return 0;</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'http://www.junhaow.com/studynotes/cs61b/cs61b%20proj1.html'
    this.page.identifier = 'studynotes/cs61b/cs61b proj1.html'
    this.page.title = 'CS 61B | Project 1 | Data Structures (Deque API)'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://junhaow.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=junhaow&related=thread&limit=6&api_key=9AouxDFpQCAlmHWv0HK3jV1Pp4Yq4T7kGncBGbAzFOXAeZTSKkt9YWshqSYb68Rq')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>