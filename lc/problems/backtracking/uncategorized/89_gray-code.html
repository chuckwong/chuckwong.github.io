<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:300,300italic,400,400italic,700,700italic|Bitter:300,300italic,400,400italic,700,700italic|Menlo:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.junhaow.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Reference: LeetCode EPI 15.11Difficulty: Medium My Post: Java Solutions with Detailed Comments and Explanations (Backtracking, Prepending) Problem The gray code is a binary numeral system where two">
<meta property="og:type" content="website">
<meta property="og:title" content="89. Gray Code">
<meta property="og:url" content="http://www.junhaow.com/lc/problems/backtracking/uncategorized/89_gray-code.html">
<meta property="og:site_name" content="B_L_OO_GGG">
<meta property="og:description" content="Reference: LeetCode EPI 15.11Difficulty: Medium My Post: Java Solutions with Detailed Comments and Explanations (Backtracking, Prepending) Problem The gray code is a binary numeral system where two">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-17T20:45:11.903Z">
<meta property="article:modified_time" content="2019-11-19T08:20:25.000Z">
<meta property="article:author" content="Junhao Wang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.junhaow.com/lc/problems/backtracking/uncategorized/89_gray-code">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>89. Gray Code | B_L_OO_GGG
</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146643833-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-146643833-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">B_L_OO_GGG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Sumomo mo momo mo no uchi</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-inbox fa-fw"></i>Archives<span class="badge">50</span></a>

  </li>
        <li class="menu-item menu-item-studynotes">

    <a href="/studynotes/" rel="section"><i class="fa fa-pencil-alt fa-fw"></i>Study Notes</a>

  </li>
        <li class="menu-item menu-item-lc">

    <a href="/lc/" rel="section"><i class="fa fa-th fa-fw"></i>LeetCode Book</a>

  </li>
        <li class="menu-item menu-item-games">

    <a href="/games/" rel="section"><i class="fa fa-gamepad fa-fw"></i>Games I've Played</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-grin-squint fa-fw"></i>About Me</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">89. Gray Code
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/lc/">LC</a></li>
            <li><a href="/lc/problems/">PROBLEMS</a></li>
            <li><a href="/lc/problems/backtracking/">BACKTRACKING</a></li>
            <li><a href="/lc/problems/backtracking/uncategorized/">UNCATEGORIZED</a></li>
            <li>89_GRAY-CODE</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <br>

<p>Reference: <a target="_blank" rel="noopener" href="https://leetcode.com/problems/gray-code/">LeetCode</a> <span class="gray">EPI 15.11</span><br>Difficulty: <span class="orange">Medium</span></p>
<p>My Post: <a target="_blank" rel="noopener" href="https://leetcode.com/problems/gray-code/discuss/400651">Java Solutions with Detailed Comments and Explanations (Backtracking, Prepending)</a></p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><blockquote>
<p>The gray code is a binary numeral system where two successive values <strong>differ in only one bit</strong>.</p>
</blockquote>
<p>Given a non-negative integer <code>n</code> representing the total number of bits in the code, print the sequence of gray code. A gray code sequence must begin with <code>0</code>.</p>
<p><strong>Example:</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="number">2</span></span><br><span class="line">Output: [<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">Explanation:</span><br><span class="line"><span class="number">00</span> - <span class="number">0</span></span><br><span class="line"><span class="number">01</span> - <span class="number">1</span></span><br><span class="line"><span class="number">11</span> - <span class="number">3</span></span><br><span class="line"><span class="number">10</span> - <span class="number">2</span></span><br><span class="line"></span><br><span class="line">For a given n, a gray code sequence may not be uniquely defined.</span><br><span class="line">For example, [<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>] is also a valid gray code sequence.</span><br><span class="line"></span><br><span class="line"><span class="number">00</span> - <span class="number">0</span></span><br><span class="line"><span class="number">10</span> - <span class="number">2</span></span><br><span class="line"><span class="number">11</span> - <span class="number">3</span></span><br><span class="line"><span class="number">01</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">Input: <span class="number">0</span></span><br><span class="line">Output: [<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">Input: <span class="number">1</span></span><br><span class="line">Output: [<span class="number">0</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>


<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><h3 id="Backtracking"><a href="#Backtracking" class="headerlink" title="Backtracking"></a>Backtracking</h3><p>Instead of enumerating all possible permutations, which takes $O(2^{n\times 2^n})$, we construct the gray code by a step-by-step approach.</p>
<p>First, we design a function that checks if two numbers <code>n1</code> and <code>n2</code> differ only in one bit.</p>
<ul>
<li><code>n1 == n2</code>: <code>xor == 0</code>, returns false.</li>
<li>Differ in more than one bit: <code>(xor &amp; (xor - 1)) != 0</code>, returns false.</li>
<li>Differ in one bit: <code>(xor &amp; (xor - 1)) == 0</code>, returns true.</li>
</ul>
<p><strong>Note:</strong> <code>num &amp; (num - 1)</code> can remove the rightmost one-bit of <code>num</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(<span class="keyword">int</span> n1, <span class="keyword">int</span> n2)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> xor = n1 ^ n2;</span><br><span class="line">  <span class="keyword">return</span> xor != <span class="number">0</span> &amp;&amp; (xor &amp; (xor - <span class="number">1</span>)) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Consider we have a number <code>0110</code>. How many differ-in-one numbers can we have for <code>0110</code>? The answer is <code>[1110, 0010, 0100, 0111]</code>. We can write it out right away because we just need to do XOR operation for each bit. In other words, we XOR <code>0110</code> with <code>[1000, 0100, 0010, 0001]</code>.</p>
<p>Based on this idea, we can take the latest generated number in the result list, and try out all differ-in-one possibilities. In order to know if the new candidate is qualified, we use a hash set to store all previously constructed numbers.</p>
<p>If the candidate is not in the hash set, we add it to the hash set and also append it to the result list. Then we construct the next number based on the number we’ve just added.</p>
<p>At last, when we have $2^n$ numbers in the result list, we need to check if the first and the last elements are compatible via <code>isValid(n1, n2)</code>. If yes, everything is done; if no, backtrack and construct a new possible number, and try again.</p>
<p><strong>Note:</strong> $2^i$ can be computed by <code>1 &lt;&lt; i</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">grayCode</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(<span class="number">0</span>));</span><br><span class="line">  Set&lt;Integer&gt; history = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">  generateGrayCode(n, history, result);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">generateGrayCode</span><span class="params">(<span class="keyword">int</span> n, Set&lt;Integer&gt; history, List&lt;Integer&gt; result)</span> </span>&#123;</span><br><span class="line">  <span class="comment">// base case</span></span><br><span class="line">  <span class="keyword">if</span> (result.size() == (<span class="number">1</span> &lt;&lt; n)) &#123;</span><br><span class="line">    <span class="comment">// check the first element and the last element</span></span><br><span class="line">    <span class="keyword">return</span> isValid(result.get(<span class="number">0</span>), result.get(result.size() - <span class="number">1</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    <span class="keyword">int</span> prevCode = result.get(result.size() - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> candCode = prevCode ^ (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">    <span class="keyword">if</span> (!history.contains(candCode)) &#123;</span><br><span class="line">      history.add(candCode);</span><br><span class="line">      result.add(candCode);</span><br><span class="line">      <span class="keyword">boolean</span> found = generateGrayCode(n, history, result);</span><br><span class="line">      <span class="keyword">if</span> (found) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      history.remove(candCode);</span><br><span class="line">      result.remove(result.size() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(2^N)$ <span class="purple">I don’t know how to get it~</span><br><strong>Space:</strong> $O(2^N)$</p>
<h3 id="Prepending-0-and-1"><a href="#Prepending-0-and-1" class="headerlink" title="Prepending 0 and 1"></a>Prepending 0 and 1</h3><p>The idea is simple. Based on the <code>result</code> in <code>n = k</code>, we add $0$ before each element to get the first half; we add $1$ before each element of <code>result</code> and <strong>reverse</strong> the list to get the second half. Then concatenate them to get the result for <code>n = k + 1</code>. <strong>See the example below to understand it!</strong>.</p>
<p>Consider how we generate gray codes from <code>n = 0</code> to <code>n = 3</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">0</span>, we have [<span class="number">0</span>].</span><br><span class="line"></span><br><span class="line">n = <span class="number">1</span>, we previously have [<span class="number">0</span>] and then construct [<span class="number">0</span>, <span class="number">1</span>].</span><br><span class="line"></span><br><span class="line">Just add <span class="number">1</span> (actually add <span class="number">1</span>, which is <span class="number">1</span> &lt;&lt; n = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">n = <span class="number">2</span>, we previously have [<span class="number">0</span>, <span class="number">1</span>] and construct [<span class="number">00</span>, <span class="number">01</span>, <span class="number">11</span>, <span class="number">10</span>].</span><br><span class="line"></span><br><span class="line">By adding <span class="number">0</span> before each element, we get [<span class="number">00</span>, <span class="number">01</span>] (actually <span class="keyword">do</span> nothing in the code)</span><br><span class="line">By adding <span class="number">1</span> before each element, we get [<span class="number">10</span>, <span class="number">11</span>] (actually add <span class="number">10</span>, which is <span class="number">1</span> &lt;&lt; n = <span class="number">10</span>)</span><br><span class="line">Reverse [<span class="number">10</span>, <span class="number">11</span>] to get [<span class="number">11</span>, <span class="number">10</span>]</span><br><span class="line">Combine [<span class="number">00</span>, <span class="number">01</span>] and [<span class="number">11</span>, <span class="number">10</span>], we have [<span class="number">00</span>, <span class="number">01</span>, <span class="number">11</span>, <span class="number">10</span>].</span><br><span class="line"></span><br><span class="line">n = <span class="number">3</span>, we previously have [<span class="number">00</span>, <span class="number">01</span>, <span class="number">11</span>, <span class="number">10</span>].</span><br><span class="line"></span><br><span class="line">Add <span class="number">0</span>:   [<span class="number">000</span>, <span class="number">001</span>, <span class="number">011</span>, <span class="number">010</span>]</span><br><span class="line">Add <span class="number">1</span>:   [<span class="number">110</span>, <span class="number">111</span>, <span class="number">101</span>, <span class="number">100</span>] (reversed) (actually add <span class="number">100</span>, which is <span class="number">1</span> &lt;&lt; n = <span class="number">1</span> &lt;&lt; <span class="number">3</span> = <span class="number">100</span>)</span><br><span class="line">Combine: [<span class="number">000</span>, <span class="number">001</span>, <span class="number">011</span>, <span class="number">010</span>, <span class="number">110</span>, <span class="number">111</span>, <span class="number">101</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>

<p><strong>Note:</strong> Consider the corner cases when <code>n = 0</code> and <code>n = 1</code>, and then decide <code>i</code> should start from $0$.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">grayCode</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(<span class="number">0</span>));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    List&lt;Integer&gt; res1 = result;</span><br><span class="line">    List&lt;Integer&gt; res2 = <span class="keyword">new</span> ArrayList&lt;&gt;(res1);</span><br><span class="line">    Collections.reverse(res2);</span><br><span class="line">    <span class="comment">// prepend &quot;1&quot;</span></span><br><span class="line">    <span class="keyword">int</span> prependVal = (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; res2.size(); ++j) &#123;</span><br><span class="line">      res2.set(j, res2.get(j) + prependVal);</span><br><span class="line">    &#125;</span><br><span class="line">    res1.addAll(res2);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(2^N)$</p>
<ul>
<li><code>n = 0</code> (<code>[0]</code>), prepending “1” takes $1$ operation (<strong>allocating extra space takes $1$ operation and reversing takes $1$ operation, but they are proportional to number of prepending operations</strong>).</li>
<li><code>n = 1</code> (<code>[0, 1]</code>), prepending “1” takes $2$ operations.</li>
<li><code>n = 2</code> (<code>[00, 01, 11, 10]</code>), prepending “1” takes $4$ operations.</li>
<li><code>n = 3</code> (<code>[000, 001, 011, 010, 110, 111, 101, 100]</code>), prepending “1” takes $8$ operations.</li>
<li><code>n = k</code>, prepending “1” takes $2^k$ operations.</li>
<li>In total, $T(N) = 1 + 2 + 4 + 8 + \ldots + 2^N = 2^N$.</li>
</ul>
<p><strong>Space:</strong> $O(2^N)$</p>
<p><strong>Without allocating extra space (In-Place):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">grayCode</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  List&lt;Integer&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;(Arrays.asList(<span class="number">0</span>));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    <span class="keyword">int</span> prependVal = (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">    <span class="keyword">int</span> oldSize = result.size();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = oldSize - <span class="number">1</span>; j &gt;= <span class="number">0</span>; --j) &#123;</span><br><span class="line">      result.add(result.get(j) + prependVal);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Same complexity.</p>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/lc/">LC</a></li>
            <li><a href="/lc/problems/">PROBLEMS</a></li>
            <li><a href="/lc/problems/backtracking/">BACKTRACKING</a></li>
            <li><a href="/lc/problems/backtracking/uncategorized/">UNCATEGORIZED</a></li>
            <li>89_GRAY-CODE</li>
          
  </ul>

    
    
    


          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem"><span class="nav-number">1.</span> <span class="nav-text">Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Analysis"><span class="nav-number">2.</span> <span class="nav-text">Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Backtracking"><span class="nav-number">2.1.</span> <span class="nav-text">Backtracking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prepending-0-and-1"><span class="nav-number">2.2.</span> <span class="nav-text">Prepending 0 and 1</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Junhao Wang"
      src="/images/cat_with_glasses.jpg">
  <p class="site-author-name" itemprop="name">Junhao Wang</p>
  <div class="site-description" itemprop="description">Debug the old world, bug the new world!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">118</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://twitter.com/junhaowww" title="Twitter → https://twitter.com/junhaowww" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/junhaowww" title="GitHub → https://github.com/junhaowww" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/junhaowww/" title="LinkedIn → https://www.linkedin.com/in/junhaowww/" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douban.com/people/maodai/" title="豆瓣 (Book) → https://www.douban.com/people/maodai/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>豆瓣 (Book)</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.jianshu.com/u/41865efdad5d/" title="https://www.jianshu.com/u/41865efdad5d/" rel="noopener" target="_blank">Xiaofud</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.davex.pw/" title="https://www.davex.pw/" rel="noopener" target="_blank">DaveX</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://" title="http://" rel="noopener" target="_blank">alexfan.xyz</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Junhao Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://junhaow.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://www.junhaow.com/lc/problems/backtracking/uncategorized/89_gray-code.html";
    this.page.identifier = "lc/problems/backtracking/uncategorized/89_gray-code.html";
    this.page.title = "89. Gray Code";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://junhaow.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
