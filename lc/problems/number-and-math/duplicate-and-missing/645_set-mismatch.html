<!DOCTYPE html>
<html lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:300,300italic,400,400italic,700,700italic|Bitter:300,300italic,400,400italic,700,700italic|Menlo:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.junhaow.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Reference: LeetCode EPI 11.10Difficulty: Easy My Post: [Super Java Collection] Brute-Force, HashMap+Count, HashSet+Math, Bitwise (clever), Sorting Problem The set S originally contains numbers from">
<meta property="og:type" content="website">
<meta property="og:title" content="645. Set Mismatch">
<meta property="og:url" content="http://www.junhaow.com/lc/problems/number-and-math/duplicate-and-missing/645_set-mismatch.html">
<meta property="og:site_name" content="B_L_OO_GGG">
<meta property="og:description" content="Reference: LeetCode EPI 11.10Difficulty: Easy My Post: [Super Java Collection] Brute-Force, HashMap+Count, HashSet+Math, Bitwise (clever), Sorting Problem The set S originally contains numbers from">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-17T20:45:12.065Z">
<meta property="article:modified_time" content="2019-11-21T07:22:04.000Z">
<meta property="article:author" content="Junhao Wang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.junhaow.com/lc/problems/number-and-math/duplicate-and-missing/645_set-mismatch">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>645. Set Mismatch | B_L_OO_GGG
</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146643833-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-146643833-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">B_L_OO_GGG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Sumomo mo momo mo no uchi</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-inbox fa-fw"></i>Archives<span class="badge">50</span></a>

  </li>
        <li class="menu-item menu-item-studynotes">

    <a href="/studynotes/" rel="section"><i class="fa fa-pencil-alt fa-fw"></i>Study Notes</a>

  </li>
        <li class="menu-item menu-item-lc">

    <a href="/lc/" rel="section"><i class="fa fa-th fa-fw"></i>LeetCode Book</a>

  </li>
        <li class="menu-item menu-item-games">

    <a href="/games/" rel="section"><i class="fa fa-gamepad fa-fw"></i>Games I've Played</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-grin-squint fa-fw"></i>About Me</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="en">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">645. Set Mismatch
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/lc/">LC</a></li>
            <li><a href="/lc/problems/">PROBLEMS</a></li>
            <li><a href="/lc/problems/number-and-math/">NUMBER-AND-MATH</a></li>
            <li><a href="/lc/problems/number-and-math/duplicate-and-missing/">DUPLICATE-AND-MISSING</a></li>
            <li>645_SET-MISMATCH</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <br>

<p>Reference: <a target="_blank" rel="noopener" href="https://leetcode.com/problems/set-mismatch/">LeetCode</a> <span class="gray">EPI 11.10</span><br>Difficulty: <span class="green">Easy</span></p>
<p>My Post: <a target="_blank" rel="noopener" href="https://leetcode.com/problems/set-mismatch/discuss/434298">[Super Java Collection] Brute-Force, HashMap+Count, HashSet+Math, Bitwise (clever), Sorting</a></p>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><blockquote>
<p>The set <code>S</code> originally contains numbers from <code>1</code> to <code>n</code>. But unfortunately, due to the data error, one of the numbers in the set got duplicated to another number in the set, which results in repetition of one number and loss of another number.</p>
</blockquote>
<blockquote>
<p>Given an array <code>nums</code> representing the data status of this set after the error. Your task is to firstly find the number occurs twice and then find the number that is missing. Return them in the form of an array.</p>
</blockquote>
<p><strong>Note:</strong> </p>
<ul>
<li>The given array size will in the range <code>[2, 10000]</code>.</li>
<li>The given array’s numbers <strong>won’t have any order</strong>.</li>
</ul>
<p><strong>Example:</strong> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">Output: [<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>


<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><h3 id="Brute-Force"><a href="#Brute-Force" class="headerlink" title="Brute-Force"></a>Brute-Force</h3><p>For each value from <code>1</code> to <code>n</code>, count its occurrence in <code>nums</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] findErrorNums(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">  <span class="comment">// assume nums is non-empty</span></span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line">  <span class="keyword">int</span> dup = -<span class="number">1</span>, miss = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123; <span class="comment">// for 1...n</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">      <span class="keyword">if</span> (val == i) &#123;</span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">2</span>) dup = i;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">0</span>) miss = i;</span><br><span class="line">    <span class="comment">// if both are set, then break</span></span><br><span class="line">    <span class="keyword">if</span> (dup &gt; <span class="number">0</span> &amp;&amp; miss &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; dup, miss &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(N^2)$<br><strong>Space:</strong> $O(1)$</p>
<h3 id="Map-Count"><a href="#Map-Count" class="headerlink" title="Map + Count"></a>Map + Count</h3><p><strong>Note:</strong> Break the loop when <code>dup</code> and <code>miss</code> are all set.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] findErrorNums(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">  <span class="comment">// assume nums is non-empty</span></span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line">  Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  <span class="comment">// first pass - count</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">    map.put(val, map.getOrDefault(val, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// second pass</span></span><br><span class="line">  <span class="keyword">int</span> dup = -<span class="number">1</span>, miss = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.containsKey(i) == <span class="keyword">false</span>) miss = i;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (map.get(i) == <span class="number">2</span>) dup = i;</span><br><span class="line">    <span class="comment">// if both are set, then break</span></span><br><span class="line">    <span class="keyword">if</span> (dup &gt; <span class="number">0</span>  &amp;&amp; miss &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; dup, miss &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(N)$<br><strong>Space:</strong> $O(N)$</p>
<h3 id="Set-Math"><a href="#Set-Math" class="headerlink" title="Set + Math"></a>Set + Math</h3><p>See the example for how this method works.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actual:   1 + 2 + 4 = 7 (use a hash set to remove extra duplicates)</span></span><br><span class="line"><span class="comment">// expected: 1 + 2 + 3 + 4 = 10</span></span><br></pre></td></tr></table></figure>

<p>So <code>expected</code> - <code>actual</code> = <code>miss</code>. And <code>dup</code> can be detected in the array iteration.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] findErrorNums(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">  <span class="comment">// assume nums is non-empty</span></span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line">  Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> actualSum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> dup = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!set.contains(val)) &#123;</span><br><span class="line">      actualSum += val;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      dup = val;</span><br><span class="line">    &#125;</span><br><span class="line">    set.add(val);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// math</span></span><br><span class="line">  <span class="keyword">int</span> expectedSum = (<span class="number">1</span> + n) * n / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">int</span> miss = expectedSum - actualSum;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; dup, miss &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="Bit-Manipulation-XOR"><a href="#Bit-Manipulation-XOR" class="headerlink" title="Bit Manipulation (XOR)"></a>Bit Manipulation (XOR)</h3><p><strong>No Extra Space!</strong></p>
<p>The idea is very clear. I should use an example to explain it.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1  2  3  4  5 (expected)</span></span><br><span class="line"><span class="comment">// 1  2  2  4  5 (actual)</span></span><br></pre></td></tr></table></figure>

<p><strong>Note:</strong> XOR: <code>x ^ x = 0</code>, <code>x ^ y ^ x = y</code>, <code>x ^ y ^ x ^ x ^ y = x</code> (remember this usage!)</p>
<p><strong>First Pass:</strong> By doing XOR for each number above, <code>xor</code> would finally equals <code>2^3</code>, which is <code>miss^dup</code>; however, we don’t know which is which!</p>
<p><strong>Second Pass:</strong></p>
<ul>
<li>Then we use <code>xor &amp; ~(xor - 1)</code> to get the rightmost one-bit of <code>xor</code>. For example, if <code>xor</code> in binary is <code>00011010</code>, the result is <code>00000010</code>. We call it <code>oneBit</code>.</li>
<li>Again, for each number above, if a number has that bit on, we put it to a <code>set</code> group; otherwise, throw it to <code>unset</code> group.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1  2  3  4  5</span></span><br><span class="line"><span class="comment">// 1  2  2  4  5</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    set: 1  1  2  2  2</span></span><br><span class="line"><span class="comment">//  unset: 3  4  4  5  5</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// notice that I don&#x27;t actually examine their binary form, just for demonstration</span></span><br></pre></td></tr></table></figure>

<ul>
<li>By doing XOR for <code>set</code> and <code>unset</code> groups, we would have <code>setXor = 2</code> and <code>unsetXor = 3</code>; however, we don’t know which is which! T_T</li>
</ul>
<p><strong>Third Pass:</strong> Decide which is which :)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] findErrorNums(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">  <span class="comment">// assume nums is non-empty</span></span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// first pass</span></span><br><span class="line">  <span class="keyword">int</span> xor = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    xor ^= (i ^ nums[i - <span class="number">1</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// second pass</span></span><br><span class="line">  <span class="keyword">int</span> oneBit = xor &amp; ~(xor - <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> setXor = <span class="number">0</span>, unsetXor = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="comment">// for i</span></span><br><span class="line">    <span class="keyword">if</span> ((i &amp; oneBit) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      setXor ^= i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      unsetXor ^= i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for nums[i - 1]</span></span><br><span class="line">    <span class="keyword">if</span> ((nums[i - <span class="number">1</span>] &amp; oneBit) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      setXor ^= nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      unsetXor ^= nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// third pass</span></span><br><span class="line">  <span class="keyword">int</span> dup = setXor;</span><br><span class="line">  <span class="keyword">int</span> miss = unsetXor;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> val : nums) &#123;</span><br><span class="line">    <span class="keyword">if</span> (miss == val) &#123; <span class="comment">// miss should be the duplicate</span></span><br><span class="line">      dup = unsetXor;</span><br><span class="line">      miss = setXor; <span class="comment">// exchange</span></span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; dup, miss &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(N)$<br><strong>Space:</strong> $O(1)$</p>
<h3 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h3><p><strong>Not Recommended!</strong></p>
<p>Check for corner cases: <code>[1, 1]</code>, <code>[2, 2]</code>, <code>[1, 2, 2]</code>, <code>[2, 2, 3]</code>. We can reduce the corner case logic of <code>miss</code> to checking the first element and last element in the array.</p>
<ul>
<li>If the first element after sorting is not <code>1</code>, then <code>1</code> is the missing element.</li>
<li>If the last element after sorting is not <code>n</code>, then <code>n</code> is the missing element.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span>[] findErrorNums(<span class="keyword">int</span>[] nums) &#123;</span><br><span class="line">  <span class="keyword">int</span> n = nums.length;</span><br><span class="line">  Arrays.sort(nums);</span><br><span class="line">  <span class="keyword">int</span> dup = -<span class="number">1</span>, missing = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (n == <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (nums[<span class="number">0</span>] == <span class="number">1</span>) ? <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">1</span>, <span class="number">2</span> &#125; : <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">2</span>, <span class="number">1</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">int</span> curr = nums[i], next = nums[i + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (curr == next) dup = curr;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (curr + <span class="number">1</span> &lt; next) missing = curr + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// checking corner cases</span></span><br><span class="line">  <span class="keyword">if</span> (nums[<span class="number">0</span>] != <span class="number">1</span>) missing = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (nums[n - <span class="number">1</span>] != n) missing = n;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; dup, missing &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> $O(N\log{N})$<br><strong>Space:</strong> $O(1)$</p>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/lc/">LC</a></li>
            <li><a href="/lc/problems/">PROBLEMS</a></li>
            <li><a href="/lc/problems/number-and-math/">NUMBER-AND-MATH</a></li>
            <li><a href="/lc/problems/number-and-math/duplicate-and-missing/">DUPLICATE-AND-MISSING</a></li>
            <li>645_SET-MISMATCH</li>
          
  </ul>

    
    
    


          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Problem"><span class="nav-number">1.</span> <span class="nav-text">Problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Analysis"><span class="nav-number">2.</span> <span class="nav-text">Analysis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Brute-Force"><span class="nav-number">2.1.</span> <span class="nav-text">Brute-Force</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map-Count"><span class="nav-number">2.2.</span> <span class="nav-text">Map + Count</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set-Math"><span class="nav-number">2.3.</span> <span class="nav-text">Set + Math</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bit-Manipulation-XOR"><span class="nav-number">2.4.</span> <span class="nav-text">Bit Manipulation (XOR)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sorting"><span class="nav-number">2.5.</span> <span class="nav-text">Sorting</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Junhao Wang"
      src="/images/cat_with_glasses.jpg">
  <p class="site-author-name" itemprop="name">Junhao Wang</p>
  <div class="site-description" itemprop="description">Debug the old world, bug the new world!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">50</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">118</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://twitter.com/junhaowww" title="Twitter → https://twitter.com/junhaowww" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/junhaowww" title="GitHub → https://github.com/junhaowww" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/junhaowww/" title="LinkedIn → https://www.linkedin.com/in/junhaowww/" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douban.com/people/maodai/" title="豆瓣 (Book) → https://www.douban.com/people/maodai/" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>豆瓣 (Book)</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.jianshu.com/u/41865efdad5d/" title="https://www.jianshu.com/u/41865efdad5d/" rel="noopener" target="_blank">Xiaofud</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.davex.pw/" title="https://www.davex.pw/" rel="noopener" target="_blank">DaveX</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://" title="http://" rel="noopener" target="_blank">alexfan.xyz</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Junhao Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://junhaow.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://www.junhaow.com/lc/problems/number-and-math/duplicate-and-missing/645_set-mismatch.html";
    this.page.identifier = "lc/problems/number-and-math/duplicate-and-missing/645_set-mismatch.html";
    this.page.title = "645. Set Mismatch";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://junhaow.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
